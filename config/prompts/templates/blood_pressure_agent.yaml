agent_key: blood_pressure_agent
version: 1.0.0
description: "血压记录智能体提示词模板"

modules:
  # ========== 必需模块 ==========
  
  # Agent职责
  role:
    type: required
    loader: config
    source: config/prompts/modules/blood_pressure/role.txt
    enabled: true
  
  # 返回消息格式
  response_format:
    type: required
    loader: config
    source: config/prompts/modules/blood_pressure/response_format.txt
    enabled: true
  
  # ========== 可选模块 ==========
  
  # 用户信息（动态加载）
  user_info:
    type: optional
    loader: dynamic
    source: runtime
    enabled: true
    condition: "{user_id is not None}"
    template: |
      系统提供的用户ID：{user_id}。
      调用工具时直接使用该 user_id，无需向用户索取。
      请根据对话历史理解上下文，从用户消息中提取血压数据，判断数据完整性，并在数据齐全时调用 record_blood_pressure 工具。
  
  # 参考文章（预留，当前版本不实现）
  reference_articles:
    type: optional
    loader: database
    source: database://rag/articles/blood_pressure
    enabled: false
    description: "从RAG系统加载相关参考文章（预留功能）"
  
  # 回答样本（Few-shot）
  few_shot_examples:
    type: optional
    loader: config
    source: config/prompts/modules/blood_pressure/few_shot_examples.txt
    enabled: true
  
  # ========== 业务模块 ==========
  
  # 功能说明
  function_description:
    type: business
    loader: config
    source: config/prompts/modules/blood_pressure/function_description.txt
    enabled: true
  
  # 数据完整性检查
  data_validation:
    type: business
    loader: config
    source: config/prompts/modules/blood_pressure/data_validation.txt
    enabled: true
  
  # 澄清机制
  clarification:
    type: business
    loader: config
    source: config/prompts/modules/blood_pressure/clarification.txt
    enabled: true
  
  # 注意事项
  notes:
    type: business
    loader: config
    source: config/prompts/modules/blood_pressure/notes.txt
    enabled: true

# 模板组合规则
composition:
  # 模块组合顺序
  order:
    - role
    - function_description
    - data_validation
    - clarification
    - response_format
    - user_info  # 动态模块，根据条件注入
    - few_shot_examples
    - notes
  # 模块之间的分隔符
  separator: "\n\n"
  # 是否在开头添加分隔符
  prefix: false
  # 是否在结尾添加分隔符
  suffix: false
